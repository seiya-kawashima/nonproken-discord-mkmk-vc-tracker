# test_auth.yml ワークフロー解説

## 📌 概要
`test_auth.yml`は、Google Sheetsへの接続が正しくできるかを自動でテストするための設定ファイルです。

### 身近な例え
このワークフローは「健康診断」のようなものです。
- 毎回コードを更新するたびに、Google Sheetsとの接続が健康（正常）かを自動でチェック
- 問題があれば即座に「要治療（修正が必要）」と教えてくれる

## 🎯 何をテストしているか

1. **認証情報の確認**
   - サービスアカウントの認証情報が正しく設定されているか
   - Base64エンコードされた認証情報が正しくデコードできるか

2. **Google Sheets接続**
   - 実際にGoogleのスプレッドシートに接続できるか
   - データの読み書きができるか

3. **環境設定の検証**
   - 必要な環境変数が全て設定されているか
   - テスト環境が正しく動作するか

## 🚀 いつ実行されるか

- **自動実行**
  - コードをmain/masterブランチにプッシュしたとき
  - プルリクエストを作成・更新したとき
  
- **手動実行**
  - GitHubのActionsタブから「Run workflow」ボタンで実行

## 💡 なぜ必要か

1. **早期発見**: 認証エラーをすぐに発見できる
2. **安心感**: コード変更が既存機能を壊していないことを確認
3. **時間節約**: 手動でテストする必要がない

## 🔧 トラブルシューティング

### テストが失敗した場合
1. GitHub Secretsに`TEST_GOOGLE_SERVICE_ACCOUNT_JSON_BASE64`が設定されているか確認
2. Google Sheetsに「テスト用VCトラッカー」というスプレッドシートが存在するか確認
3. サービスアカウントにスプレッドシートの編集権限があるか確認