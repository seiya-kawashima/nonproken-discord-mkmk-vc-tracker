# GitHub Actions 初心者ガイド

## 📌 GitHub Actionsとは？

### 身近な例えで理解する

GitHub Actionsは「**自動実行ロボット**」のようなものです。

#### 例えば、こんな経験はありませんか？
- 毎回手動でテストを実行するのが面倒
- コードを変更するたびに動作確認を忘れてしまう
- チームメンバーが変更を加えたとき、壊れていないか心配

**GitHub Actionsがあれば、これらを全て自動化できます！**

### 具体的に何ができるの？

| やりたいこと | GitHub Actionsでできること |
|------------|-------------------------|
| コードをプッシュしたらテストを実行したい | ✅ 自動でテスト実行 |
| エラーがあったら教えてほしい | ✅ 失敗時に通知 |
| 毎日定時にバックアップを取りたい | ✅ スケジュール実行 |
| プルリクエストの内容をチェックしたい | ✅ PR時に自動チェック |

---

## 🎯 このプロジェクトでのGitHub Actions

このプロジェクトでは、以下の自動テストが設定されています：

### 1. Google Sheets接続テスト
**いつ動く？**
- コードをmain/masterブランチにプッシュしたとき
- プルリクエストを作成・更新したとき

**何をする？**
- Google Sheetsへの接続確認
- 認証情報の検証
- テストデータの書き込み

---

## 🚀 GitHub Actionsの使い方（超簡単！）

### ステップ1: コードをプッシュする

```bash
git add .
git commit -m "何か変更"
git push
```

**これだけで自動テストが始まります！**

### ステップ2: 結果を確認する

#### 1. GitHubのページを開く
ブラウザでGitHubのリポジトリページを開きます。

#### 2. 「Actions」タブをクリック
上部のメニューから「Actions」タブを選択します。

![Actions Tab](https://docs.github.com/assets/cb-36318/images/help/repository/actions-tab.png)
*※ 画像はGitHub公式ドキュメントより*

#### 3. テスト結果を見る

実行中または完了したワークフローが一覧表示されます。

**見るべきポイント：**
- ✅ **緑のチェックマーク** = テスト成功！問題なし！
- 🟡 **黄色の丸** = 実行中...しばらく待ってください
- ❌ **赤のバツ** = テスト失敗。エラーを確認しましょう

---

## 📊 テスト結果の詳細を見る

### エラーが出た場合の確認方法

1. **赤いバツのワークフローをクリック**
   
2. **ジョブ名（Test Google Sheets Connection）をクリック**

3. **エラーメッセージを確認**
   - どこでエラーが発生したか
   - 何が原因か
   - どう修正すればよいか

### よく見るエラーメッセージ

```
❌ Google API エラー: APIError: [403]: Request had insufficient authentication scopes.
```
→ **意味**: Google Sheetsの権限が不足しています
→ **対処**: スプレッドシートの共有設定を確認

```
❗ 設定エラー: テスト環境環境用の環境変数 TST_GOOGLE_SERVICE_ACCOUNT_JSON_BASE64 が設定されていません
```
→ **意味**: 必要な設定（Secrets）が足りません
→ **対処**: GitHub Secretsを設定する必要があります

---

## 🔧 GitHub Secretsの設定方法

### Secretsとは？
パスワードやトークンなど、**秘密にしたい情報**を安全に保管する場所です。

### 設定手順（画像付き）

#### 1. Settingsを開く
リポジトリページの「Settings」タブをクリック

#### 2. Secrets and variablesを選択
左メニューから「Secrets and variables」→「Actions」を選択

#### 3. New repository secretをクリック
緑色の「New repository secret」ボタンをクリック

#### 4. 必要な情報を入力
- **Name**: `TST_GOOGLE_SERVICE_ACCOUNT_JSON_BASE64`
- **Secret**: Base64エンコードされた認証情報

#### 5. Add secretをクリック
保存完了！

---

## 💡 よくある質問

### Q: テストは手動で実行できますか？
**A**: 現在の設定では、コードをプッシュすると自動実行されます。手動実行機能を追加することも可能です。

### Q: テストにお金はかかりますか？
**A**: いいえ！GitHubの無料プランで十分使えます。
- パブリックリポジトリ: 無制限
- プライベートリポジトリ: 月2,000分まで無料

### Q: テストが失敗してもコードは保存されますか？
**A**: はい、テストが失敗してもコードはGitHubに保存されます。テストは「チェック」の役割です。

### Q: 他の人のプルリクエストでもテストは動きますか？
**A**: はい、プルリクエストを作成・更新すると自動でテストが実行されます。

### Q: テストの実行時間はどのくらいですか？
**A**: 通常1〜2分程度で完了します。

---

## 🎓 もっと詳しく知りたい方へ

### 初心者向けリソース
- [GitHub Actions クイックスタート（日本語）](https://docs.github.com/ja/actions/quickstart)
- [GitHub Actions の理解](https://docs.github.com/ja/actions/learn-github-actions/understanding-github-actions)

### このプロジェクトのワークフロー
プロジェクト内の以下のファイルで設定されています：
- `.github/workflows/test_auth.yml` - Google Sheets接続テスト
- `.github/workflows/test.yml` - 全体的なテスト
- `.github/workflows/test_base64.yml` - Base64認証テスト

---

## 🚨 困ったときは

### テストが失敗し続ける場合

1. **エラーメッセージを読む**
   - 具体的に何が問題か書いてあります

2. **トラブルシューティングガイドを確認**
   - [Google Sheets設定ガイド](./setup/GOOGLE_SHEETS_SETUP.md#-トラブルシューティング)

3. **Issueを作成**
   - エラーメッセージをコピーして相談

### 設定がよくわからない場合

まずは以下を確認してください：
1. Google Sheetsに「テスト用VCトラッカー」という名前のスプレッドシートを作成したか
2. サービスアカウントに編集権限を付与したか
3. GitHub Secretsに`TST_GOOGLE_SERVICE_ACCOUNT_JSON_BASE64`を設定したか

---

## 📝 まとめ

GitHub Actionsは難しく見えるかもしれませんが、実は：

✅ **自動で動く** - 設定すれば勝手にテストしてくれる
✅ **無料で使える** - 基本的な使用は無料
✅ **エラーを見つけてくれる** - 問題があればすぐ教えてくれる
✅ **チーム開発に便利** - みんなのコードをチェックしてくれる

**まずは「Actions」タブを見てみることから始めましょう！**